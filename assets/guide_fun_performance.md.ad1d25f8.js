import{_ as a,o as s,c as e,U as n}from"./chunks/framework.17475148.js";const C=JSON.parse('{"title":"用户性能指标","description":"","frontmatter":{},"headers":[],"relativePath":"guide/fun/performance.md","filePath":"guide/fun/performance.md","lastUpdated":1691998951000}'),l={name:"guide/fun/performance.md"},p=n(`<h1 id="用户性能指标" tabindex="-1">用户性能指标 <a class="header-anchor" href="#用户性能指标" aria-label="Permalink to &quot;用户性能指标&quot;">​</a></h1><p>对于一个网站，除了了解加载速度之外，更关心的可能是用户的使用体验，可以从下列三个方面去考量用户的使用体验</p><ul><li>感知加载速度：页面在屏幕上加载并渲染出所有视觉元素的速度</li><li>加载响应度：为了使组件对用户交互作出快速响应，页面加载和执行任何所需 JavaScript 代码的速度</li><li>视觉稳定性：页面上的元素是否会出现让用户感到意外的偏移，并对用户交互造成潜在的干扰？</li></ul><h2 id="首次非网页背景像素渲染-fp" tabindex="-1">首次非网页背景像素渲染(FP) <a class="header-anchor" href="#首次非网页背景像素渲染-fp" aria-label="Permalink to &quot;首次非网页背景像素渲染(FP)&quot;">​</a></h2><p>当浏览器将渲染树转换为屏幕上的像素时，浏览器就执行了绘制或渲染。FP表示浏览器首次渲染页面的时间，这不包括默认背景绘制，但包括非默认背景绘制。更多详情可以查看 <a href="https://github.com/w3c/paint-timing" target="_blank" rel="noreferrer">paint-timing</a></p><h2 id="首次内容绘制-fcp" tabindex="-1">首次内容绘制(FCP) <a class="header-anchor" href="#首次内容绘制-fcp" aria-label="Permalink to &quot;首次内容绘制(FCP)&quot;">​</a></h2><p>FCP报告浏览器首次呈现任何文本、图像（包括背景图像）、非白色画布或 SVG 的时间。这包括带有待定网络字体的文本。这是用户第一次开始使用页面内容。</p><h2 id="最大内容绘制-lcp" tabindex="-1">最大内容绘制(LCP) <a class="header-anchor" href="#最大内容绘制-lcp" aria-label="Permalink to &quot;最大内容绘制(LCP)&quot;">​</a></h2><p>最大内容绘制 (LCP) 指标会根据页面首次开始加载的时间点来报告可视区域内可见的最大图像或文本块完成渲染的相对时间。</p><p>更多可查看<a href="https://web.dev/lcp/" target="_blank" rel="noreferrer">https://web.dev/lcp/</a></p><h2 id="首次输入延迟-fid" tabindex="-1">首次输入延迟(FID) <a class="header-anchor" href="#首次输入延迟-fid" aria-label="Permalink to &quot;首次输入延迟(FID)&quot;">​</a></h2><p>FID 测量从用户第一次与页面交互（例如当他们单击链接、点按按钮或使用由 JavaScript 驱动的自定义控件）直到浏览器对交互作出响应，并实际能够开始处理事件处理程序所经过的时间。</p><p>更多可查看<a href="https://web.dev/fid/" target="_blank" rel="noreferrer">https://web.dev/fid/</a></p><h2 id="累计布局偏移-cls" tabindex="-1">累计布局偏移(CLS) <a class="header-anchor" href="#累计布局偏移-cls" aria-label="Permalink to &quot;累计布局偏移(CLS)&quot;">​</a></h2><p>CLS 测量整个页面生命周期内发生的所有意外布局偏移中最大一连串的布局偏移分数。</p><p>更多可查看<a href="https://web.dev/cls/" target="_blank" rel="noreferrer">https://web.dev/cls/</a></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>一些性能指标可以在页面完成加载后进行计算，而其他指标（如 CLS）则会将页面的整个生命周期纳入考量范围，且只有在页面开始卸载后才会完成计算。</p><p>这种不统一性就不得不延迟上报时机至页面隐藏时，这样仍然存在问题，某些数据可能没有被测量到。例如，用户可能没有和界面交互就切换了页面，这时FID没有被测量就上报了。</p><p>性能指标会在<a href="/eagle-tracker/guide/use/basic#页面卸载时上报">页面卸载时上报</a></p></div><h2 id="手动获取指标" tabindex="-1">手动获取指标 <a class="header-anchor" href="#手动获取指标" aria-label="Permalink to &quot;手动获取指标&quot;">​</a></h2><p>可以手动获取上述指标，但由于时机问题并不保证调用API时全部指标都采集到了。</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> eagle </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">EagleTracker</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">isTest</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">appId</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">XXXXXXXX</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">dsn</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://test.com/log</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> perf </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> eagle</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">performance</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(perf</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getVitals</span><span style="color:#A6ACCD;">())</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>具体数据类型可查看 <a href="/eagle-tracker/guide/use/type#performancemetric-以用户为中心的性能指标">PerformanceMetric</a></p>`,21),r=[p];function o(t,c,i,d,h,D){return s(),e("div",null,r)}const y=a(l,[["render",o]]);export{C as __pageData,y as default};
